{% extends 'base.html.twig' %}

{% block title %}Team Details{% endblock %}
{% block description %}Details for {{ team.teamName }} in the SPIIN Sports system{% endblock %}
{% block keywords %}team, {{ team.teamName }}, sports, SPIIN{% endblock %}

{% block body_class %}team-show-page{% endblock %}

{% block main %}
  <div class="container py-5">
    <h1 class="mb-4">Team: {{ team.teamName }}</h1>
    <p><strong>Sport:</strong> {{ team.teamTypeOfSport }}</p>
    <p><strong>Number of Athletes:</strong> {{ team.teamNbAthletes }}</p>
    <p><strong>Wins:</strong> {{ team.teamWins }}</p>
    <p><strong>Losses:</strong> {{ team.teamLosses }}</p>

    <h3 class="mt-4">Tournaments Won</h3>
    <ul class="list-group">
      {% for result in team.results %}
        <li class="list-group-item">
          <a href="{{ path('app_tournament_show', {'id': result.tournament.id}) }}">
            {{ result.tournament.tournamentName }}
          </a>
        </li>
      {% else %}
        <li class="list-group-item text-muted">No tournaments won yet.</li>
      {% endfor %}
    </ul>

    <h3 class="mt-4">Team Members</h3>
    <ul class="list-group mb-4">
      {% for user in team.users %}
        <li class="list-group-item">
          {{ user.getFullName() }} ({{ user.userRole }})
        </li>
      {% else %}
        <li class="list-group-item text-muted">No athletes assigned to this team yet.</li>
      {% endfor %}
    </ul>

    <div class="d-flex gap-2">
      <a href="{{ path('app_team_manage_players', {'id': team.id}) }}" class="btn btn-primary">
        <i class="bi bi-person-gear"></i> Manage Players
      </a>
      <a href="{{ path('app_team_index') }}" class="btn btn-secondary">Back to List</a>
      <a href="{{ path('app_team_edit', {'id': team.id}) }}" class="btn btn-outline-primary">
        <i class="bi bi-pencil"></i> Edit
      </a>
      <form method="post" action="{{ path('app_team_delete', {'id': team.id}) }}" onsubmit="return confirm('Are you sure you want to delete this team?');">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ team.id) }}">
        <button class="btn btn-outline-danger">
          <i class="bi bi-trash"></i> Delete
        </button>
      </form>
    </div>
  </div>
{% endblock %}